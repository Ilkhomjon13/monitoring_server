<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live Monitoring</title>
</head>
<body>
<h1>Live Monitoring</h1>
<ul id="results"></ul>

<script>
const survey_id = SURVEY_ID_PLACEHOLDER; // bot.py orqali linkda keladi
const ws = new WebSocket(`ws://localhost:8000/ws/${survey_id}`);

ws.onmessage = function(event) {
    const data = JSON.parse(event.data);
    const ul = document.getElementById("results");
    ul.innerHTML = "";
    data.forEach(c => {
        const li = document.createElement("li");
        li.textContent = `${c.name}: ${c.votes} ovoz`;
        ul.appendChild(li);
    });
};
</script>
</body>
</html>
